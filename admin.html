<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Admin - رفع مشروع</title>
</head>
<body>

<h2>لوحة التحكم للعميل</h2>
<p>اختر صورة للمشروع، ثم اضغط رفع</p>

<input type="text" id="title" placeholder="عنوان المشروع"><br><br>
<textarea id="description" placeholder="وصف المشروع"></textarea><br><br>
<input type="file" id="file"><br><br>
<button onclick="uploadProject()">رفع المشروع</button>
<p id="status"></p>

<script>
const CLOUD_NAME = "dqkrwssks";  // ضع هنا Cloud name بتاعك
const UPLOAD_PRESET = "upload_images"; // الاسم اللي عملناه في Cloudinary

function uploadProject() {
  const title = document.getElementById("title").value;
  const description = document.getElementById("description").value;
  const file = document.getElementById("file").files[0];

  if(!title || !description || !file){
    alert("اكمل كل البيانات");
    return;
  }

  const formData = new FormData();
  formData.append("file", file);
  formData.append("upload_preset", UPLOAD_PRESET);

  fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`, {
    method: "POST",
    body: formData
  })
  .then(res => res.json())
  .then(data => {
    const imageUrl = data.secure_url;
    document.getElementById("status").innerHTML = `
      ✅ تم رفع الصورة بنجاح! <br>
      رابط الصورة: <input type="text" value="${imageUrl}" readonly style="width:400px">
      <br>الآن أرسل الرابط + العنوان + الوصف للمالك ليضيفه على الموقع.
    `;
  })
  .catch(err => {
    document.getElementById("status").innerText = "❌ فشل رفع الصورة";
    console.log(err);
  });
}
</script>

</body>
</html>